load('ext://dotenv', 'dotenv')

def dotenv_watch(dot_env_path='.env'):
  if os.path.exists(dot_env_path):
    dotenv()

  watch_file(dot_env_path)

def get_config(cfg, key, default=None, type='string'):
  env_name = key.upper().replace('-', '_')
  default_value = os.environ.get(env_name, default)
  value = cfg.get(key, default_value)

  if type == 'string':
    return value

  if type == 'int':
    return int(value)

  if type == 'bool':
    return value

  fail('Unknown type: %s' % type)

def dict_merge(a, b):
  c = {}
  c.update(a)
  c.update(b)
  return c

def bool_to_string(value):
  return 'true' if value else 'false'
